@import "../utils/_all.scss";

/*------------------------------*\

    #SINGLE PROJECT / ALL PROJECTS

\*------------------------------*/

.single #map {
	height: 250px;
}
.all-projects #map {
	height: 850px!important;
}

.a-project{
	.description{
		margin-bottom:0;
	}
	
	.wrap-bg.c-main{
		@extend %transition;
		overflow: hidden;				
		height:0;		
		
		&:before{
			@extend %transition;			
			transform:scaleX(0);			
		}
		.box:first-child{
			padding-top:$space*0.4;	
		}
		
		.card__title{
			margin-bottom:$space*0.1;	
		}
		
		.button{
			margin-top:$gutter;	
		}	
		
		&:after{
			@extend %triangle;
			border-color: transparent transparent $c-main;
			left:inherit;	
			right:47.5%;
		}			
	}
	.wrap-bg.c-main.is-active{
		height:100%;
		overflow:visible;		
		margin: $space*0.4 0 0;
		
		&:before{			
			transform:scaleX(5);			
		}	
	}
	.notify{
		span{			
			display:block;
			width:100%;
			padding:$space*0.15 $space*0.3;
			border-radius:$radius;
			margin-top:$space*0.2;	
		}
		.error{
			background-color:#fff;
			color:$c-focus;
		}
		.success{
			background-color:#fff;
			color:$c-main;
		}
	}
}
.all-projects {
	.fluxi-wrap {
	    margin-bottom:0;
	}
	.social{
		margin-bottom: $space/2;
	}
	.fluxi-content{
		margin-top: $space/2;
	}
}
.following.box{
	
	justify-content:center;
	
	.box__social, .box__btn{
		margin-top:$space*0.3;	
	}
	.box__social{
		align-self:center;
		text-align:center;
		width:100%;		
		
	}
	
	
}

.following.box{
	.button{
		margin-top:0;	
	}
}


.input-n-btn{
	align-self:flex-end; 
		
	.box__solo{
		flex: 1 1 0;
		margin-bottom: 0;
		max-width: inherit;
		padding-right: $gutter/2;
	}
	.box__fixe {
		flex: 0;
		margin-bottom:0;
	}
	.input__mailing{
		border-bottom: 1px solid #fff;
	}
}

/* ETAPES */

.dotline {
	position: relative;
	margin-top: $gutter;
}

.dotline__line {
	position: absolute;
	width: 100%;
	top: 7px;

	&::before {
		content: '';
		position: absolute;
		width: 100%;
		height: 2px;
		background: $c-main;
	}
}
.steps {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
}
.dotline__step {
	position: relative;
	display: flex;
	flex-direction: column;
	height: 42px;
	
	.micro-legende {
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		display: none;
	}
	
	&.is-active {
		background: #fff;

		.micro-legende {
			color: $c-main;
		}
		.dot {
			position: relative;
			top: -7px;
			width: 32px;
			height: 32px;
			border: 2px solid $c-main;
			background: #fff!important;			

			&::before {
				content: '';
				width: 16px;
				height: 16px;
				border-radius: 50%;
				top: 6px;
				left: 6px;
				position: absolute;
			}
		}
		
	}

	&.is-inactive {
		.dot {
			border: 2px solid $c-main;
			background: #fff;
		}
	}
}


/* REPARTITION */

.graphbar {
	display: flex;
	height: 25px;
	margin-top: $gutter;
}

.graphbar__segment {
	background: $c-main;
	border-right: 1px solid rgba(#fff,0.2);

	&:first-child {
		border-radius: $radius 0 0 $radius;
	}
	&:last-child {
		border-radius: 0 $radius $radius 0;
	}
}

.repartition {
	
	.infosbloc {
		margin-top: $gutter;
		ul {
			list-style: none;
			padding-left: 0;
			margin: $gutter/4 0 0 0;
			border-bottom: 2px solid #fff;
		}
	
		.pointe {
			transform: translateX(50%);
		}
	}
	.pointe--up{
		top:2.8rem;
	}
}
.financer {
	display: flex;
	align-items: center;
	border-top: 2px solid #fff;
	padding: 15px 10px;

	.legende {
		margin-left: 10px;
		margin-right: auto;
	}
}


/* Color system */

.c-solai {
	.etapes {
		@include etapes_color($c-solaire);
	}
	.repartition {
		@include graphbar_color($c-solaire);
	}
	.p-details{
		@include project_colors($c-solaire);
	}
	.testimony{
		@include nrj_gradient_bg($c-solaire);
	}
	.card-project, .filter-nrj{
		@include card_project_colors($c-solaire);
		.card__icon:before{
			 content: "\e91f";
		}
		.icon-filter:before{
			content: "\e91e";
		}
	}
	&.card-map .link-cta{
		color:$c-solaire;
	}
	
} 
.c-eolie {
	.etapes {
		@include etapes_color($c-eolien);
	}
	.repartition {
		@include graphbar_color($c-eolien);
	}
	.p-details{
		@include project_colors($c-eolien);
	}
	.testimony{
		@include nrj_gradient_bg($c-eolien);
	}
	.card-project, .filter-nrj{
		@include card_project_colors($c-eolien);
		.card__icon:before{
			  content: "\e90e";
		}
		.icon-filter:before{
			content: "\e90d";
		}
	}
	&.card-map .link-cta{
		color:$c-eolien;
	}
} 
.c-micro {
	.etapes {
		@include etapes_color($c-hydro);
	}
	.repartition {
		@include graphbar_color($c-hydro);
	}
	.p-details{
		@include project_colors($c-hydro);
	}
	.testimony{
		@include nrj_gradient_bg($c-hydro);
	}
	.card-project, .filter-nrj{
		@include card_project_colors($c-hydro);
		.card__icon:before{
			 content: "\e918";
		}
		.icon-filter:before{
			content: "\e917";
		}
	}
	&.card-map .link-cta{
		color:$c-hydro;
	}
} 
.c-bioma {
	.etapes {
		@include etapes_color($c-bio);
	}
	.repartition {
		@include graphbar_color($c-bio);
	}
	.p-details{
		@include project_colors($c-bio);
	}
	.testimony{
		@include nrj_gradient_bg($c-bio);
	}
	.card-project, .filter-nrj{
		@include card_project_colors($c-bio);
		.card__icon:before{
			 content: "\e902";
		}
		.icon-filter:before{
			content: "\e901";
		}
	}
	&.card-map .link-cta{
		color:$c-bio;
	}
} 
.c-geoth {
	.etapes {
		@include etapes_color($c-geo);
	}
	.repartition {
		@include graphbar_color($c-geo);
	}
	.p-details{
		@include project_colors($c-geo);
	}
	.testimony{
		@include nrj_gradient_bg($c-geo);
	}
	.card-project, .filter-nrj{
		@include card_project_colors($c-geo);
		.card__icon:before{
			 content: "\e914";
		}
		.icon-filter:before{
			content: "\e913";
		}
	}
	&.card-map .link-cta{
		color:$c-geo;
	}
} 
.c-econo {
	.etapes {
		@include etapes_color($c-eco);
	}
	.repartition {
		@include graphbar_color($c-eco);
	}
	.p-details{
		@include project_colors($c-eco);
	}
	.testimony{
		@include nrj_gradient_bg($c-eco);
	}
	.card-project, .filter-nrj{
		@include card_project_colors($c-eco);
		.card__icon:before{
			 content: "\e90c";
		}
		.icon-filter:before{
			 content: "\e90b";
		}
	}
	&.card-map .link-cta{
		color:$c-eco;
	}
} 


@media screen and (max-width: $bp--small) {
	.single-projets .p-details {
		position: relative;
		background-color: transparent;
		margin-top: -8rem;
	}
	.p-details__equi {
		border-radius: 3px;
	}
}

@media screen and (min-width: $bp--small) {	
	.single #map {
		height: 450px;
	}
	.following.box{
		justify-content:inherit;
		.box__social{
			width:inherit;
		}			
		.box__btn{
			margin-left:auto;					
		}		
	}
	.a-project .wrap-bg.c-main{	
		&:after{			
			right:16.5rem;	
		}	
		&.collecte{
			&:after{			
				right:20.5rem;	
			}
		}		
		.box__half{			
			&:last-child{
				padding-right:0;		
			}
		}
	}
	
}

@media screen and (min-width: $bp--medium) {
	
	.steps {
		padding-left:$gutter*2;
	}
	
	.a-project .wrap-bg.c-main{
		.box__half{
			&:first-child{
				max-width:300px;			
			}		
		}
	}
	.input-n-btn{			
		.box__solo{
			padding-right: $gutter;
		}
	}
	.start {
		position: absolute;
		left: 0;
		top: -9px;
		width: 2px;
		height: 20px;
		background: $c-main;
	}
	.end {
		position: absolute;
		right: 0;
		top: -5px;
		width: 12px;
		height: 12px;
		border-top: 2px solid $c-main;
		border-right: 2px solid $c-main;
		transform: rotate(45deg);
		transform-origin: center;
	}
	.dotline__line {
		top: 37px;
		+ .dotline__step {
			margin-left: 8rem
		}
	}
	.dotline__step:last-child {
		margin-right: 8rem;
	}
	.dotline__step {
		height: 62px;
			
		.dot {
			margin-top: 30px;
		}
		.micro-legende {
			display: block;
		}
	}
}